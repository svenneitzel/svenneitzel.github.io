(function(){$(window).load(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;return m=1,k=0,l=[],b=!1,c=4,d=Math.floor(Math.random()*c),e=2,j=$(window).width(),g=$(".portfolio .project").length,h=function(){var a;return a=Math.round(Math.random()*(g-1)),a!==e?e>a?$(".portfolio .project:gt("+(g-1-e+a)+")").prependTo(".portfolio"):$(".portfolio .project:lt("+(a-2)+")").appendTo(".portfolio"):void 0},o=function(){var a,c,d,e;return b?void 0:(b=!0,p(),a=l[0],window.scrollTo(0,0),d=$(".portfolio .project.active"),d.removeClass("active"),e=d.find(".project-slider"),e.css("left","0px"),e.data("position",0),a>0?$(".portfolio .project:lt("+a+")").appendTo(".portfolio"):0>a&&$(".portfolio .project:gt("+(g-1+a)+")").prependTo(".portfolio"),c=$(".portfolio .project").eq(2),c.find(".main-picture img").css("margin-top","0"),c.addClass("active"),k=0,i(e),d.find(".main-picture img").each(function(){var a;return a=$(this).data("top"),$(this).css("margin-top","-"+a+"px")}),c.on("transitionend webkitTransitionEnd",function(a){return"height"===a.originalEvent.propertyName&&$(a.originalEvent.target).hasClass("active")&&(l.shift(),b=!1,l.length>0)?o():void 0}))},a=function(a){return l.length<1&&l.push(a),o()},f=function(){return $(".portfolio .project .project-slider").each(function(a,b){return b=$(b),b.data("position",0)}),$(".portfolio .project .main-picture img").each(function(){var a;return a=$(this).data("top"),$(this).css("margin-top","-"+a+"px")})},n=function(a,b){var c,d,e;return c=a.data("position"),a.data("width")||a.data("width",a.find(".project-content").width()),e=a.data("width"),1===b?d=-1*Math.round(Math.min(Math.abs(c-j/2.5),Math.abs(e-j))):-1===b&&(d=Math.round(Math.min(c+j/2.5,0))),a.data("position",d),a.css("left",""+d+"px"),i(a)},i=function(a){var b,c,d,e;return d=$(".portfolio .project.active"),e=Math.abs(a.data("width")),c=Math.abs(a.data("position")),b=Math.abs(e-j),0===c?(d.find(".arrow.move-left").addClass("hide"),d.find(".arrow.move-right").removeClass("hide")):c>=b?(d.find(".arrow.move-left").removeClass("hide"),d.find(".arrow.move-right").addClass("hide")):(d.find(".arrow.move-left").removeClass("hide"),d.find(".arrow.move-right").removeClass("hide"))},p=function(){var a;return a=d+1,a>c&&(a=0),$("body").removeClass("background-"+d).addClass("background-"+a),$(".portfolio .project .arrow").removeClass("background-"+d).addClass("background-"+a),d=a},$("body").addClass("background-"+d),h(),f(),a(1),$(".portfolio").bind("mousewheel",function(b,c,d,e){return 0>e?a(1):e>0&&a(-1),!1}),$(document).on("click",".project:not(.active)",function(){var b;return b=$(".portfolio .project").index($(this)),a(b-e),!1}),$(document).on("click",".project.active .arrow, .project.active .gallery img",function(){var a,b;return b=$(".project.active .project-slider"),$(this).hasClass("arrow")?$(this).hasClass("move-right")?n(b,1):n(b,-1):(a=$(".project.active .gallery .item img"),a.length>a.index($(this))&&n(b,1)),!1}),$(document).on("keydown",function(b){return 37===b.keyCode?(n($(".project.active .project-slider"),-1),!1):39===b.keyCode?(n($(".project.active .project-slider"),1),!1):38===b.keyCode?(a(-1),!1):40===b.keyCode?(a(1),!1):32===b.keyCode?!1:void 0})})}).call(this);