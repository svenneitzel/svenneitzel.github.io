(function(){$(document).ready(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;return k=1,i=0,j=[],b=!1,c=2,h=$(window).width(),e=$(".portfolio .project").length,f=function(){var a;return a=Math.round(Math.random()*(e-1)),a!==c?c>a?$(".portfolio .project:gt("+(e-1-c+a)+")").prependTo(".portfolio"):$(".portfolio .project:lt("+(a-2)+")").appendTo(".portfolio"):void 0},m=function(){var a,c,d,f;return b?void 0:(b=!0,a=j[0],window.scrollTo(0,0),d=$(".portfolio .project.active"),d.removeClass("active"),f=d.find(".project-slider"),f.css("left","0px"),f.data("position",0),a>0?$(".portfolio .project:lt("+a+")").appendTo(".portfolio"):0>a&&$(".portfolio .project:gt("+(e-1+a)+")").prependTo(".portfolio"),c=$(".portfolio .project").eq(2),c.find(".main-picture img").css("margin-top","0"),c.addClass("active"),i=0,g(f),d.find(".main-picture img").each(function(){var a;return a=$(this).data("top"),$(this).css("margin-top","-"+a+"px")}),c.on("transitionend webkitTransitionEnd",function(a){return"height"===a.originalEvent.propertyName&&$(a.originalEvent.target).hasClass("active")&&(j.shift(),b=!1,j.length>0)?m():void 0}))},a=function(a){return j.length<1&&j.push(a),m()},d=function(){return $(".portfolio .project .project-slider").each(function(a,b){return b=$(b),b.data("position",0)}),$(".portfolio .project .main-picture img").each(function(){var a;return a=$(this).data("top"),$(this).css("margin-top","-"+a+"px")})},l=function(a,b){var c,d,e;return c=a.data("position"),a.data("width")||a.data("width",a.find(".project-content").width()),e=a.data("width"),1===b?d=-1*Math.round(Math.min(Math.abs(c-h/2.5),Math.abs(e-h))):-1===b&&(d=Math.round(Math.min(c+h/2.5,0))),a.data("position",d),a.css("left",""+d+"px"),g(a)},g=function(a){var b,c,d,e;return d=$(".portfolio .project.active"),e=Math.abs(a.data("width")),c=Math.abs(a.data("position")),b=Math.abs(e-h),0===c?(d.find(".arrow.move-left").addClass("hide"),d.find(".arrow.move-right").removeClass("hide")):c>=b?(d.find(".arrow.move-left").removeClass("hide"),d.find(".arrow.move-right").addClass("hide")):(d.find(".arrow.move-left").removeClass("hide"),d.find(".arrow.move-right").removeClass("hide"))},f(),d(),a(1),$(".portfolio").bind("mousewheel",function(b,c,d,e){return 0>e?a(1):e>0&&a(-1),!1}),$(document).on("click",".project:not(.active)",function(){var b;return b=$(".portfolio .project").index($(this)),a(b-c),!1}),$(document).on("click",".project.active .arrow, .project.active .gallery img",function(){var a,b;return b=$(".project.active .project-slider"),$(this).hasClass("arrow")?$(this).hasClass("move-right")?l(b,1):l(b,-1):(a=$(".project.active .gallery .item img"),a.length>a.index($(this))&&l(b,1)),!1}),$(document).on("keydown",function(b){return 37===b.keyCode?l($(".project.active .project-slider"),-1):39===b.keyCode?l($(".project.active .project-slider"),1):38===b.keyCode?a(-1):40===b.keyCode&&a(1),!1})})}).call(this);